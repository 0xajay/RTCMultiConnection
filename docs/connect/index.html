<!DOCTYPE html>
<html id="home" lang="en">

<head>
    <title>"RTCMultiConnection.connect" method</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="author" type="text/html" href="https://plus.google.com/+MuazKhan">
    <meta name="author" content="Muaz Khan">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <link rel="stylesheet" href="//www.rtcmulticonnection.org/style.css">
	
    <style>
            p { padding: .8em; }

            li {
                border-bottom: 1px solid rgb(189, 189, 189);
                border-left: 1px solid rgb(189, 189, 189);
                padding: .5em;
            }
			
			.image-container {
				text-align:center;
				margin: 2em 0;
			}
			
			.image-parent {
				margin: 0 2em;
				border: 2px solid black;
				border-radius: 5px;
			}
			
			.image-parent img {
				width: 100%;
			}
			
			li pre {
				margin: 0;
			}
        </style>
    <!-- for HTML5 el styling -->
    <script>
        document.createElement('article');
        document.createElement('footer');
    </script>
	
	<script type="text/javascript" src="//www.rtcmulticonnection.org/syntax/sh_main.min.js"></script>
    <script type="text/javascript" src="//www.rtcmulticonnection.org/syntax/sh_javascript.min.js"></script>
    <script type="text/javascript" src="//www.rtcmulticonnection.org/syntax/sh_html.min.js"></script>
    <link type="text/css" rel="stylesheet" href="//www.rtcmulticonnection.org/syntax/sh_style.css">
</head>

<body onload="sh_highlightDocument();">
    <article>
        <a href="http://www.RTCMultiConnection.org/docs/" style="border-bottom: 1px solid #2844FA; font-size: 1.2em; position: absolute; text-decoration: none;right:0;top:0;">RTCMultiConnection Docs</a>

        <h1><a href="http://www.RTCMultiConnection.org/">RTCMultiConnection</a> API Reference / "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method</h1>
		
        <div class="github-stargazers"></div>
        
        <blockquote class="inline">
            "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method can be used to connect to socket; which is known as signaling channel in WebRTC. That socket will be used for presence detections and initial handshake.
            <br /><br />
            "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method can be invoked both for initiator and participants. However it is usually recommended to be invoked only for participants. Read more at the bottom of this page.
        </blockquote>
        
        <section class="experiment">
            <h2>How to invoke "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method?</h2>
            <pre class="sh_javascript">
connection.<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>('session-id');

// you can restrict its usage only for participants
if(your_are_participant) {
    connection.<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>();
}
</pre>
        </section>
        
        <section class="experiment">
            <div class="image-container">
                <div class="image-parent"><img src="/img/Difference-Between-Open-And-Connect-Methods.png"></div>
            </div>
        </section>
        
        <section class="experiment">
            <h2>Quick Demo: <a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a> is invoked both for participants and initiator</h2>
            <pre class="sh_javascript">
&lt;script src="//www.rtcmulticonnection.org/latest.js"&gt;&lt;/script&gt;
&lt;button id="openNewSessionButton"&gt;Open New Room&lt;/button&gt;
&lt;script&gt;
</pre><pre class="sh_javascript">
var connection = <a href="http://www.rtcmulticonnection.org/docs/constructor/">new RTCMultiConnection</a>().<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>();
document.querySelector('#openNewSessionButton').onclick = function() {
    connection.<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a>();
};
</pre><pre class="sh_html">
&lt;/script&gt;
</pre>
        </section>
        
        <section class="experiment">
            <h2>Another Demo: <a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a> is invoked only for participants</h2>
            <pre class="sh_javascript">
&lt;script src="//www.rtcmulticonnection.org/latest.js"&gt;&lt;/script&gt;
&lt;button id="openNewSessionButton"&gt;Open New Room&lt;/button&gt;
&lt;button id="joinSessionButton"&gt;Join Room&lt;/button&gt;
&lt;script&gt;
</pre><pre class="sh_javascript">
var connection = <a href="http://www.rtcmulticonnection.org/docs/constructor/">new RTCMultiConnection</a>();
document.querySelector('#openNewSessionButton').onclick = function() {
    connection.<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a>();
};
document.querySelector('#joinSessionButton').onclick = function() {
    connection.<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>();
};
</pre><pre class="sh_html">
&lt;/script&gt;
</pre>
        </section>
        
        <h2 id="FAQ"><a href="#FAQ">FAQ</a></h2>
        
        <blockquote class="inline">
            Why you're using "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method both for initiator and participants?
        </blockquote>
        
        <section class="experiment">
            <h2>Answer</h2>
            
            <ol>
                <li>
                    "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method connects to signaling channel. It doesn't tries to "<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>" or "<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a>" the room.
                </li>
                
                <li>
                    "<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a>" method quickly opens the room....so participants shouldn't use it.
                </li>
                
                <li>
                    Without using "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method, you can NEVER get "<a href="http://www.RTCMultiConnection.org/docs/onNewSession/"><code>onNewSession</code></a>" event to be fired. Though you can use "<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>" method directly.
                </li>
            </ol>
            
            <p>
                Remember, if you're using "<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>" method directly, then keep in mind that "join" method quickly joins the room....so initiator shouldn't use it.
            </p>
            
            <blockquote class="inline">
                Summary: Usually it is a good practice to use "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method only for participants however feel free to use it for initiator as well. RTCMultiConnection is smart enough to understand which property/method/object is useful for which user.
            </blockquote>
        </section>
        
        <blockquote class="inline">
            What if I use both 'connect' and 'open' methods for initiator? How it will work?
        </blockquote>
        
        <section class="experiment">
            <h2>Answer</h2>
            
            <p style="margin-top:0;">
                "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method will simply initialize signaling medium. Now, we've an active signaling gateway and we're ready to use it for presence detection and signaling. Later on, as soon as you'll invoke "open" method; RTCMultiConnection will detect that signaling medium is already initialized; it will NEVER try again to initialize the signaling channel. It will simply use existing opened channel and "create" the room.
            </p>
            
            <p>
                To understand it from coding perspective, RTCMultiConnection has a "RTCMultiSession" object which is usually known as "backbone" object because it plays middleman role between public-API and the rest of all private/or RTCPeerConnection API.
            </p>
            
            <p>
                This backbone object i.e. "RTCMultiSession" handles signaling channels as soon as its constructor is invoked/initialized.
            </p>
            
            <p>
                It means that if you called "<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a>" method; its constructor is initialized like this:
            </p>
            
            <pre class="sh_javascript">
var rtcMultiSession;

connection.<a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a> = function() {
    if(rtcMultiSession == 'undefined') {
        // it will auto connect to signaling channel
        rtcMultiSession = new RTCMultiSession();
    }
};
</pre>

            <p>
                Now, "<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a>" method will check if it is already initialized i.e. channel is already connected:
            </p>
            
            <pre class="sh_javascript">
connection.<a href="http://www.RTCMultiConnection.org/docs/open/"><code>open</code></a> = function() {
    if(rtcMultiSession == 'undefined') {
        // it will auto connect to signaling channel
        rtcMultiSession = new RTCMultiSession();
    }
};
</pre>
        </section>
        
        <blockquote class="inline">
            What's difference between <a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a> and <a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a> method?
        </blockquote>
        
        <section class="experiment">
            <h2>Answer</h2>
            
            <p style="margin-top:0;">
                <a href="http://www.RTCMultiConnection.org/docs/connect/"><code>connect</code></a> method simply connects to socket. It'll NEVER try to auto join the room. However, <a href="http://www.RTCMultiConnection.org/docs/onNewSession/"><code>onNewSession</code></a> event will be fired as soon as a room is available.
            </p>
            
            <p>
                <a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a> connects the socket, then quickly captures user-media and then quickly joins the room. It NEVER waits for <a href="http://www.RTCMultiConnection.org/docs/onNewSession/"><code>onNewSession</code></a> event to be fired. Also, <a href="http://www.RTCMultiConnection.org/docs/onNewSession/"><code>onNewSession</code></a> event will NEVER be fired if you're using <a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a> method.
            </p>
            
            <p>
                One last point for <a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a> method; it is possible to pass <a href="http://www.RTCMultiConnection.org/docs/sessionid/"><code>session-id</code></a> over <a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a> method:
            </p>
            
            <pre class="sh_javascript">
connection.<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>('session-id');
</pre>
            <p>
                In this case, when "<a href="http://www.RTCMultiConnection.org/docs/sessionid/"><code>session-id</code></a>" is passed over "<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>" method; RTCMultiConnection will wait for new-room; and as soon as a room gets available; RTCMultiConnection will capture user-media and quickly join the room. As it is said, RTCMultiConnection will NEVER fire "<a href="http://www.RTCMultiConnection.org/docs/onNewSession/"><code>onNewSession</code></a>" event if "<a href="http://www.RTCMultiConnection.org/docs/join/"><code>join</code></a>" method is used.
            </p>
        </section>

        <br />
        <section style="border: 1px solid rgb(189, 189, 189); margin: 1em 3em; border-radius: .2em;">
                <h2 id="feedback" style="padding: .2em .4em; border-bottom: 1px solid rgb(189, 189, 189);">Want to ask a Question?</h2>
                <div>
                    <textarea id="message" style="height: 8em; margin: .2em; width: 98%; border: 1px solid rgb(189, 189, 189); outline: none; resize: vertical;" placeholder="Feel free to ask any question regarding RTCMultiConnection.js!"></textarea>
                </div>
                <button id="send-message" style="font-size: 1em;">Ask a Question</button><small style="margin-left:1em;">You can include your email for private conversation!</small>
            </section>
            
            <section class="experiment own-widgets latest-commits">
                <h2 class="header" id="updates" style="color: red; padding-bottom: .1em;"><a href="https://github.com/muaz-khan/WebRTC-Experiment/commits/master" target="_blank">Latest Updates</a></h2>
                <div id="github-commits"></div>
            </section>
    </article>
    
    <a href="https://github.com/muaz-khan/WebRTC-Experiment/tree/master/RTCMultiConnection" class="fork-left"></a>
	
        <footer>
            <a href="https://www.webrtc-experiment.com/" target="_blank">WebRTC Experiments!</a> and 
            <a href="http://www.RTCMultiConnection.org/docs/" target="_blank">RTCMultiConnection.js</a> ©
            <a href="mailto:muazkh@gmail.com" target="_blank">Muaz Khan</a>:
            <a href="https://twitter.com/WebRTCWeb" target="_blank">@WebRTCWeb</a>
        </footer>
    <script src="//www.rtcmulticonnection.org/commits.js"> </script>
</body>
</html>
